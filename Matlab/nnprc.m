%% NAR Model Proceesing Function
% By Devon Holley
% 12/31/14

% This function takes the Neural Network Model and processes the
% coefficients to give a final I/O expression.

function [coeff] = nnprc(net)

% Hidden Neuron Weights
h=cell2mat(net.IW(1));

% Output Weights
o=cell2mat(net.LW(2));

h1=h(1:5,1:5);
h2=h(1:5,6:10);
h3=h(1:5,11:15);
h4=h(1:5,16:20);
h5=h(1:5,21:25);

coeff(1,1)=(o(1,1)*h1(1,1))+(o(1,2)*h1(2,1))+(o(1,3)*h1(3,1))+(o(1,4)*h1(4,1))+(o(1,5)*h1(5,1));
coeff(1,2)=(o(1,1)*h1(1,2))+(o(1,2)*h1(2,2))+(o(1,3)*h1(3,2))+(o(1,4)*h1(4,2))+(o(1,5)*h1(5,2));
coeff(1,3)=(o(1,1)*h1(1,3))+(o(1,2)*h1(2,3))+(o(1,3)*h1(3,3))+(o(1,4)*h1(4,3))+(o(1,5)*h1(5,3));
coeff(1,4)=(o(1,1)*h1(1,4))+(o(1,2)*h1(2,4))+(o(1,3)*h1(3,4))+(o(1,4)*h1(4,4))+(o(1,5)*h1(5,4));
coeff(1,5)=(o(1,1)*h1(1,5))+(o(1,2)*h1(2,5))+(o(1,3)*h1(3,5))+(o(1,4)*h1(4,5))+(o(1,5)*h1(5,5));

coeff(2,1)=(o(2,1)*h2(1,1))+(o(2,2)*h2(2,1))+(o(2,3)*h2(3,1))+(o(2,4)*h2(4,1))+(o(2,5)*h2(5,1));
coeff(2,2)=(o(2,1)*h2(1,2))+(o(2,2)*h2(2,2))+(o(2,3)*h2(3,2))+(o(2,4)*h2(4,2))+(o(2,5)*h2(5,2));
coeff(2,3)=(o(2,1)*h2(1,3))+(o(2,2)*h2(2,3))+(o(2,3)*h2(3,3))+(o(2,4)*h2(4,3))+(o(2,5)*h2(5,3));
coeff(2,4)=(o(2,1)*h2(1,4))+(o(2,2)*h2(2,4))+(o(2,3)*h2(3,4))+(o(2,4)*h2(4,4))+(o(2,5)*h2(5,4));
coeff(2,5)=(o(2,1)*h2(1,5))+(o(2,2)*h2(2,5))+(o(2,3)*h2(3,5))+(o(2,4)*h2(4,5))+(o(2,5)*h2(5,5));

coeff(3,1)=(o(3,1)*h3(1,1))+(o(3,2)*h3(2,1))+(o(3,3)*h3(3,1))+(o(3,4)*h3(4,1))+(o(3,5)*h3(5,1));
coeff(3,2)=(o(3,1)*h3(1,2))+(o(3,2)*h3(2,2))+(o(3,3)*h3(3,2))+(o(3,4)*h3(4,2))+(o(3,5)*h3(5,2));
coeff(3,3)=(o(3,1)*h3(1,3))+(o(3,2)*h3(2,3))+(o(3,3)*h3(3,3))+(o(3,4)*h3(4,3))+(o(3,5)*h3(5,3));
coeff(3,4)=(o(3,1)*h3(1,4))+(o(3,2)*h3(2,4))+(o(3,3)*h3(3,4))+(o(3,4)*h3(4,4))+(o(3,5)*h3(5,4));
coeff(3,5)=(o(3,1)*h3(1,5))+(o(3,2)*h3(2,5))+(o(3,3)*h3(3,5))+(o(3,4)*h3(4,5))+(o(3,5)*h3(5,5));

coeff(4,1)=(o(4,1)*h4(1,1))+(o(4,2)*h4(2,1))+(o(4,3)*h4(3,1))+(o(4,4)*h4(4,1))+(o(4,5)*h4(5,1));
coeff(4,2)=(o(4,1)*h4(1,2))+(o(4,2)*h4(2,2))+(o(4,3)*h4(3,2))+(o(4,4)*h4(4,2))+(o(4,5)*h4(5,2));
coeff(4,3)=(o(4,1)*h4(1,3))+(o(4,2)*h4(2,3))+(o(4,3)*h4(3,3))+(o(4,4)*h4(4,3))+(o(4,5)*h4(5,3));
coeff(4,4)=(o(4,1)*h4(1,4))+(o(4,2)*h4(2,4))+(o(4,3)*h4(3,4))+(o(4,4)*h4(4,4))+(o(4,5)*h4(5,4));
coeff(4,5)=(o(4,1)*h4(1,5))+(o(4,2)*h4(2,5))+(o(4,3)*h4(3,5))+(o(4,4)*h4(4,5))+(o(4,5)*h4(5,5));

coeff(5,1)=(o(5,1)*h5(1,1))+(o(5,2)*h5(2,1))+(o(5,3)*h5(3,1))+(o(5,4)*h5(4,1))+(o(5,5)*h5(5,1));
coeff(5,2)=(o(5,1)*h5(1,2))+(o(5,2)*h5(2,2))+(o(5,3)*h5(3,2))+(o(5,4)*h5(4,2))+(o(5,5)*h5(5,2));
coeff(5,3)=(o(5,1)*h5(1,3))+(o(5,2)*h5(2,3))+(o(5,3)*h5(3,3))+(o(5,4)*h5(4,3))+(o(5,5)*h5(5,3));
coeff(5,4)=(o(5,1)*h5(1,4))+(o(5,2)*h5(2,4))+(o(5,3)*h5(3,4))+(o(5,4)*h5(4,4))+(o(5,5)*h5(5,4));
coeff(5,5)=(o(5,1)*h5(1,5))+(o(5,2)*h5(2,5))+(o(5,3)*h5(3,5))+(o(5,4)*h5(4,5))+(o(5,5)*h5(5,5));

